From 64e8517e63da3311ed5016936b3d5a26411f7872 Mon Sep 17 00:00:00 2001
From: Vladimir 'phcoder' Serbinenko <phcoder@gmail.com>
Date: Sat, 4 May 2013 13:54:08 +0200
Subject: [PATCH 421/482] 	* grub-core/tests/lib/functional_test.c: Don't
 stop on first failed 	test.

---
 ChangeLog                             | 5 +++++
 grub-core/tests/lib/functional_test.c | 6 +++++-
 2 files changed, 10 insertions(+), 1 deletion(-)

diff --git a/ChangeLog b/ChangeLog
index 8d41517..d5f9bb9 100644
--- a/ChangeLog
+++ b/ChangeLog
@@ -1,5 +1,10 @@
 2013-05-04  Vladimir Serbinenko  <phcoder@gmail.com>
 
+	* grub-core/tests/lib/functional_test.c: Don't stop on first failed
+	test.
+
+2013-05-04  Vladimir Serbinenko  <phcoder@gmail.com>
+
 	* grub-core/normal/menu_text.c (menu_clear_timeout): Clear second
 	line of timeout as it may contain the rest of long line.
 
diff --git a/grub-core/tests/lib/functional_test.c b/grub-core/tests/lib/functional_test.c
index c70e1ad..957354e 100644
--- a/grub-core/tests/lib/functional_test.c
+++ b/grub-core/tests/lib/functional_test.c
@@ -33,7 +33,11 @@ grub_functional_test (grub_extcmd_context_t ctxt __attribute__ ((unused)),
   int ok = 1;
 
   FOR_LIST_ELEMENTS (test, grub_test_list)
-    ok = ok && !grub_test_run (test);
+    {
+      grub_errno = 0;
+      ok = ok && !grub_test_run (test);
+      grub_errno = 0;
+    }
   if (ok)
     grub_printf ("ALL TESTS PASSED\n");
   else
-- 
1.8.2.1

